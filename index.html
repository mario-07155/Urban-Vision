<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <!-- ===== META BÁSICO ===== -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- ===== TÍTULO & DESCRIÇÃO ===== -->
  <title>Urban Vision | Monitoramento Ambiental</title>
  <meta name="description" content="Urban Vision — Plataforma inteligente de monitoramento ambiental e análise de qualidade do ar em tempo real na cidade de Luanda.">
  <meta name="keywords" content="monitoramento ambiental, qualidade do ar, poluição, Luanda, Urban Vision, mapa interativo, PM2.5, SO2, vegetação urbana, sustentabilidade">
  <meta name="author" content="Mário Correia Pedro">

  <!-- ===== FAVICON ===== -->
  <link rel="icon" type="image/png" href="img/nasa.png">

  <!-- ===== SEO SOCIAL (Open Graph / Twitter) ===== -->
  <meta property="og:title" content="Urban Vision | Monitoramento Ambiental">
  <meta property="og:description" content="Analisa e monitora em tempo real a qualidade do ar e o verde urbano em Luanda. Uma iniciativa sustentável de Mário Correia Pedro.">
  <meta property="og:image" content="img/nasa.png">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="pt_PT">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Urban Vision | Monitoramento Ambiental">
  <meta name="twitter:description" content="Mapa ambiental de Luanda — qualidade do ar, vegetação e indicadores urbanos.">
  <meta name="twitter:image" content="img/nasa.png">

  <!-- ===== PERFORMANCE ===== -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://unpkg.com">

  <!-- ===== ESTILOS ===== -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="style.css">

  <!-- ===== MANIFESTO / PWA (opcional futuramente) ===== -->
  <link rel="manifest" href="manifest.json">

  <!-- ===== CORES DO NAVEGADOR ===== -->
  <meta name="theme-color" content="#002f6c">
</head>



<body>

<!-- ===== BARRA LATERAL ===== -->
<div id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h3><i class="bi bi-search"></i> <span class="sidebar-title">Urban Vision</span></h3>
    <button id="toggle-btn" class="btn btn-sm btn-light text-primary"><i class="bi bi-list"></i></button>
  </div>

  <ul class="sidebar-menu">
    <li><i class="bi bi-house-door-fill"></i><span>Início</span></li>
    <li><i class="bi bi-map"></i><span>Mapa</span></li>
    <li><i class="bi bi-database"></i><span>Dados</span></li>
    <li><i class="bi bi-graph-up"></i><span>Relatórios</span></li>
    <li><i class="bi bi-gear-fill"></i><span>Configurações</span></li>
  </ul>

  <!-- LEGENDA -->
  <div class="legend">
    <h5><i class="bi bi-info-circle"></i> Legenda</h5>
    <div class="legend-item"><div class="color-box" style="background:#198754"></div> Qualidade Boa (PM2.5 ≤ 10)</div>
    <div class="legend-item"><div class="color-box" style="background:#ffc107"></div> Moderada (PM2.5 ≤ 25)</div>
    <div class="legend-item"><div class="color-box" style="background:#dc3545"></div> Ruim (PM2.5 > 25)</div>
    <hr class="text-light">
    <div class="legend-item"><i class="bi bi-wind"></i> PM2.5 — Poluição do ar</div>
    <div class="legend-item"><i class="bi bi-cloud-fog"></i> SO₂ — Dióxido de enxofre</div>
    <div class="legend-item"><i class="bi bi-tree-fill"></i> Vegetação — Percentual verde</div>
  </div>
</div>

<!-- ===== MAIN CONTENT ===== -->
<div id="main" class="main">
  <div class="header d-flex align-items-center justify-content-between px-3">

    <!-- LOGO NASA -->
    <div class="d-flex align-items-center gap-2">
      <img src="img/nasa.png" alt="Logo NASA" 
           style="width:45px; height:45px; border-radius:50%; object-fit:cover; border:2px solid rgba(255,255,255,0.5);">
      <div class="weather" id="weatherBar">
        <i class="bi bi-brightness-high-fill"></i>
        <span id="weatherText">Domingo, 05 Outubro 2025 — Ensolarado</span>
      </div>
    </div>

    <div id="clock" class="fw-bold"></div>
  </div>

<!-- ===== PESQUISA E TÍTULO ===== -->
<div class="search-header">
  <h3 class="page-title">Dashboard / Mapa - Zonas de Luanda</h3>

  <div class="search-container">
    <input type="text" id="searchCity" placeholder="Pesquisar bairro... (ex: Samba)">
    <button id="searchBtn" class="btn-search"><i class="bi bi-search"></i></button>
    <button id="resetBtn" class="btn-reset"><i class="bi bi-arrow-clockwise"></i></button>
  </div>
</div>


  <!-- ===== MAPA ===== -->
  <div id="map"></div>

  <!-- ===== CARDS PRINCIPAIS ===== -->
<div class="card-grid" id="cardsContainer">
  <div class="info-card"><i class="bi bi-wind"></i><h3 class="fw-bold fs-6 mt-2">PM2.5</h3><p>Selecione um bairro no mapa.</p></div>
  <div class="info-card"><i class="bi bi-cloud-fog"></i><h3 class="fw-bold fs-6 mt-2">SO₂</h3><p>Informações ao clicar em uma área.</p></div>
  <div class="info-card"><i class="bi bi-tree-fill"></i><h3 class="fw-bold fs-6 mt-2">Vegetação</h3><p>Percentual verde urbano.</p></div>
  <div class="info-card"><i class="bi bi-geo-alt-fill"></i><h3 class="fw-bold fs-6 mt-2">Localização</h3><p>Dados atualizados da área.</p></div>
</div>

<!-- ===== SETAS (decorativas) ===== -->
<div class="arrow-section">
  <i class="bi bi-arrow-down-circle-fill arrow"></i>
  <i class="bi bi-arrow-down-circle-fill arrow"></i>
  <i class="bi bi-arrow-down-circle-fill arrow"></i>
  <i class="bi bi-arrow-down-circle-fill arrow"></i>
</div>

<!-- ===== CARDS DESCRITIVOS ===== -->
<div class="description-cards">
  <div class="desc-card">
    <h4><i class="bi bi-wind"></i> PM2.5</h4>
    <p>Representa partículas finas em suspensão. Quanto menor o valor, melhor a qualidade do ar.</p>
  </div>

  <div class="desc-card">
    <h4><i class="bi bi-cloud-fog"></i> SO₂</h4>
    <p>Indica a presença de dióxido de enxofre, geralmente relacionado a áreas industriais.</p>
  </div>

  <div class="desc-card">
    <h4><i class="bi bi-tree-fill"></i> Vegetação</h4>
    <p>Mostra o percentual de cobertura verde em determinada área urbana.</p>
  </div>

  <div class="desc-card">
    <h4><i class="bi bi-geo-alt-fill"></i> Localização</h4>
    <p>Mostra o nome, coordenadas e dados de zona selecionada no mapa.</p>
  </div>
</div>



  
</div>

<!-- Scripts -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// Sidebar toggle
const sidebar = document.getElementById('sidebar');
const toggleBtn = document.getElementById('toggle-btn');

toggleBtn.addEventListener('click', () => {
  if (window.innerWidth < 768) {
    sidebar.classList.toggle('show');
  } else {
    sidebar.classList.toggle('collapsed');
  }
});

// Clock
function updateClock() {
  const now = new Date();
  document.getElementById('clock').innerText = now.toLocaleTimeString('pt-PT');
}
setInterval(updateClock, 1000);
updateClock();

// Mapa Leaflet
const map = L.map('map').setView([-8.839,13.289],12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  maxZoom:29,
  attribution:'&copy; OpenStreetMap'
}).addTo(map);

// Dados (mock)
const bairros = [
  {name:"Maianga", coords:[-8.835,13.232], pm25:20, so2:6, verd:30, texto:"Maianga tem PM moderado e vegetação de 30%."},
  {name:"Samba", coords:[-8.850,13.310], pm25:15, so2:4, verd:40, texto:"Samba possui ar limpo e vegetação de 40%."},
  {name:"Rangel", coords:[-8.870,13.285], pm25:30, so2:8, verd:20, texto:"Rangel com poluição mais alta e vegetação baixa (20%)."},
  {name:"Ingombota", coords:[-8.820,13.243], pm25:10, so2:3, verd:50, texto:"Ingombota é um bairro saudável com 50% de vegetação."}
];

function getColor(pm){ if(pm<=10)return"#198754"; if(pm<=25)return"#ffc107"; return"#dc3545"; }

// Marcadores
bairros.forEach(b=>{
  const c=L.circle(b.coords,{
    color:getColor(b.pm25),
    fillColor:getColor(b.pm25),
    fillOpacity:0.6,
    radius:400
  }).addTo(map);
  c.bindPopup(`<b>${b.name}</b><br>PM2.5:${b.pm25}<br>SO₂:${b.so2}<br>Vegetação:${b.verd}%`);
  c.on('click',()=>{
    document.getElementById('cardsContainer').innerHTML = `
      <div class="info-card"><i class="bi bi-wind"></i><h3>PM2.5</h3><p>${b.pm25} μg/m³</p></div>
      <div class="info-card"><i class="bi bi-cloud-fog"></i><h3>SO₂</h3><p>${b.so2} ppm</p></div>
      <div class="info-card"><i class="bi bi-tree-fill"></i><h3>Vegetação</h3><p>${b.verd}%</p></div>
      <div class="info-card"><i class="bi bi-geo-alt-fill"></i><h3>${b.name}</h3><p>${b.texto}</p></div>
    `;
  });
});

// Pesquisa
document.getElementById('searchBtn').addEventListener('click', ()=>{
  const q = document.getElementById('searchCity').value.trim().toLowerCase();
  const bairro = bairros.find(b => b.name.toLowerCase() === q);
  if(bairro){
    map.setView(bairro.coords, 14);
    L.popup().setLatLng(bairro.coords)
      .setContent(`<b>${bairro.name}</b><br>${bairro.texto}`)
      .openOn(map);
  } else {
    alert("Bairro não encontrado!");
  }
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
  map.setView([-8.839,13.289],12);
});

</script>
<script>
  const sidebar = document.getElementById('sidebar');
  const toggleBtn = document.getElementById('toggle-btn');

  toggleBtn.addEventListener('click', () => {
    // Se for mobile
    if (window.innerWidth <= 768) {
      sidebar.classList.toggle('show');
    } else {
      // Desktop — apenas recolhe
      sidebar.classList.toggle('collapsed');
    }
  });

  // Fecha o menu ao clicar fora (modo mobile)
  document.addEventListener('click', (e) => {
    if (window.innerWidth <= 768) {
      if (!sidebar.contains(e.target) && !toggleBtn.contains(e.target)) {
        sidebar.classList.remove('show');
      }
    }
  });

  // Relógio dinâmico (opcional)
  function updateClock() {
    const now = new Date();
    document.getElementById('clock').textContent = now.toLocaleTimeString();
  }
  setInterval(updateClock, 1000);
  updateClock();
</script>

</body>
</html>
